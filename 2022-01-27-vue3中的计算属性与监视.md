### è®¡ç®—å±æ€§ä¸ç›‘è§†

#### 1.computedå‡½æ•°

+ ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´
+ å†™æ³•ï¼š

```js
import {computed} from 'vue'// æ„Ÿè§‰æœ‰ç‚¹æ¨¡å—åŒ–ç¼–ç çš„æ€æƒ³ï¼Œç”¨ä»€ä¹ˆåŠŸèƒ½å¼•å…¥ä»€ä¹ˆ
setup(){
    ...
    // è®¡ç®—å±æ€§â€”â€”ç®€å†™
    let fullName = computed(()=>{
        return person.firstName+'-'+person.lastName
    })
    // è®¡ç®—å±æ€§â€”â€”å®Œæ•´
    let fullName = computed({
        get(){
        	return person.firstName+'-'+person.lastName
        },
        set(value){
            const nameArr = value.split('-')
            person.firstName = nameArr[0]
            person.lastName = nameArr[1]
        }
    })
}
```

#### 2.watchå‡½æ•°

+ æ³¨æ„ä¸¤ä¸ªå°ç‚¹ï¼š
  + ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ä¸”å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰
  + ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆ
  + ä¸è¦è„‘é˜”ç–¼ğŸ˜©ï¼Œä»”ç»†å¯¹æ¯”æƒ…å†µä¸‰å’Œç‰¹æ®Šæƒ…å†µğŸ˜›

```js
import {watch} from 'vue'
setup(){
    let sum = ref(0)
    let msg = ref('ä½ å¥½å•Šï¼')
    // æƒ…å†µä¸€ï¼šç›‘è§†refæ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®
    watch(sum,(newValue,oldValue)=>{
        console.log('sumå˜äº†',newValue,oldValue)
    },{immediate:true})
    // æƒ…å†µäºŒï¼šç›‘è§†refæ‰€å®šä¹‰çš„å¤šä¸ªå“åº”å¼æ•°æ®
    watch([sum,msg],(newValue,oldValue)=>{
        console.log('sumå’Œmsgå˜äº†',newValue,oldValue)// è¾“å‡ºä¸¤ä¸ªæ•°ç»„ï¼ˆæ–°æ•°ç»„å’Œæ—§æ•°ç»„ï¼‰
    },{immediate:true})
    let person = reactive({
        name:'å¼ ä¸‰',
        age:18,
        job:{
            j1:20
        }
    })
    // æƒ…å†µä¸‰ï¼šç›‘è§†reactiveæ‰€å®šä¹‰çš„å“åº”å¼æ•°æ®
    // è¾“å‡ºä¸¤ä¸ªæ•°ç»„ï¼ˆæ–°æ•°ç»„å’Œæ—§æ•°ç»„ï¼‰ï¼Œå‘ç°æ–°æ•°ç»„å’Œå°±æ•°ç»„ä¸€æ ·çš„
    // æ³¨æ„1ï¼šæ— æ³•è·å–oldValue
    // æ³¨æ„2ï¼šé»˜è®¤å¼€å¯æ·±åº¦ç›‘è§†ï¼Œå…³ä¸æ‰deepé…ç½®æ— æ•ˆ
    watch(person,(newValue,oldValue)=>{
        console.log('sumå’Œmsgå˜äº†',newValue,oldValue)
    },{deep:true})
    // æƒ…å†µå››ï¼šç›‘è§†reactiveæ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ³¨æ„å…¶å†™æ³•èƒ½è·å–oldValue
    watch(()=>person.name,(newValue,oldValue)=>{
        console.log('personçš„nameå˜åŒ–äº†',newValue,oldValue)
    })
    // æƒ…å†µå››ï¼šç›‘è§†reactiveæ‰€å®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§ï¼Œæ³¨æ„å…¶å†™æ³•èƒ½è·å–oldValue
    watch([()=>person.name,()=>person.age],(newValue,oldValue)=>{
        console.log('personçš„nameå’Œageå˜åŒ–äº†',newValue,oldValue)
    })
    // ç‰¹æ®Šæƒ…å†µï¼šç›‘è§†å¯¹è±¡ä¸­çš„å¯¹è±¡ï¼Œdeepé…ç½®æœ‰æ•ˆæ³¨æ„é…ç½®ï¼Œæ— æ³•è·å–oldValue
    watch(()=>person.job, (newValue,oldValue)=>{
        console.log('personçš„nameå’Œageå˜åŒ–äº†',newValue,oldValue)
    },{deep:true})

```

#### 3.valueç»†èŠ‚

```js
import {watch} from 'vue'
setup(){
    let sum = ref(0)
    let person = ref({
        name:'å¼ ä¸‰',
        age:18,
        job:{
            j1:20
        }
    })
    // ä¸éœ€è¦.valueï¼Œå› ä¸º.valueæ‹¿åˆ°çš„æ˜¯å±æ€§å€¼
    watch(sum,(newValue,oldValue)=>{
        console.log('sumå˜äº†',newValue,oldValue)
    })
    // éœ€è¦.valueï¼Œå› ä¸º.valueæ‹¿åˆ°çš„Proxyå®ä¾‹å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰.valueé™¤éæ›´æ›¿æ•´ä¸ªproxyå³æ”¹å˜å¯¹è±¡å­˜å‚¨åœ°å€||å¼€å¯æ·±åº¦ç›‘è§†||ä½¿ç”¨reactiveå‡½æ•°å®ç°å“åº”å¼
    watch(person.value,(newValue,oldValue)=>{
        console.log('personå˜äº†',newValue,oldValue)
    })
```

#### 4.watchEffectå‡½æ•°

+ watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œåˆè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒ
+ watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨å“ªä¸ªå±æ€§ï¼Œå°±ç›‘è§†å“ªä¸ªå±æ€§
+ watchEffectæœ‰ç‚¹åƒcomputedï¼Œéƒ½æ˜¯**æ‰€ä¾èµ–çš„æ•°æ®**å˜åŒ–å°±æ‰§è¡Œå›è°ƒï¼š
  + ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»å†™è¿”å›å€¼
  + watchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼

```js
import {watchEffect} from 'vue'// æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ç›´æ¥æ‰§è¡Œå›è°ƒ
setup(){
    let sum = ref(0)
    let person = ref({
        name:'å¼ ä¸‰',
        age:18,
        job:{
            j1:{
                salary:20
            }
        }
    })
    watchEffect(()=>{
        // ç”¨åˆ°è°ç›‘è§†è°
        const x1 = sum.value
        const x2 = person.job.j1.salary
        console.log('watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†')
    })
```

